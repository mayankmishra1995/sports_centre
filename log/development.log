  [1m[35m (2795.2ms)[0m  [1m[35mCREATE DATABASE "sports_centre_development" ENCODING = 'unicode'[0m
  [1m[35m (61.8ms)[0m  [1m[35mCREATE DATABASE "sports_centre_test" ENCODING = 'unicode'[0m
  [1m[35m (16.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1964102279786043705)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateCourts (20230205144339)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE TABLE "courts" ("id" bigserial primary key, "name" character varying, "type" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20230205144339"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateReservations (20230205144906)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE TABLE "reservations" ("id" bigserial primary key, "court_id" integer, "start_time" timestamp(6), "end_time" timestamp(6), "notes" text, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20230205144906"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2023-02-05 20:51:55.827641"], ["updated_at", "2023-02-05 20:51:55.827641"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(1964102279786043705)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mCourt Load (0.6ms)[0m  [1m[34mSELECT "courts".* FROM "courts" ORDER BY "courts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api/v1/courts/availability?date=2022-01-01&time=12:00" for 127.0.0.1 at 2023-02-06 02:39:41 +0530
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (No route matches [GET] "/api/v1/courts/availability"):
  
Started GET "/api/v1/courts?date=2022-01-01&time=12:00" for 127.0.0.1 at 2023-02-07 00:24:27 +0530
  
ActionController::RoutingError (No route matches [GET] "/api/v1/courts"):
  
Started GET "/courts?date=2022-01-01&time=12:00" for 127.0.0.1 at 2023-02-07 00:25:00 +0530
Processing by CourtsController#index as */*
  Parameters: {"date"=>"2022-01-01", "time"=>"12:00"}
Completed 500 Internal Server Error in 16ms (Allocations: 6680)


  
NameError (undefined local variable or method `parms' for #<CourtsController:0x00000000008930>

    if params[:date].present? && parms[:time].present?
                                 ^^^^^
Did you mean?  params
               params=
               @_params):
  
app/controllers/courts_controller.rb:7:in `index'
Started GET "/courts?date=2022-01-01&time=12:00" for 127.0.0.1 at 2023-02-07 00:25:37 +0530
Processing by CourtsController#index as */*
  Parameters: {"date"=>"2022-01-01", "time"=>"12:00"}
Completed 500 Internal Server Error in 3ms (Allocations: 2253)


  
NameError (undefined local variable or method `parms' for #<CourtsController:0x000000000089d0>

    if params[:date].present? && parms[:time].present?
                                 ^^^^^
Did you mean?  params
               params=
               @_params):
  
app/controllers/courts_controller.rb:7:in `index'
Started GET "/courts?date=2022-01-01&time=12:00" for 127.0.0.1 at 2023-02-07 00:25:50 +0530
Processing by CourtsController#index as */*
  Parameters: {"date"=>"2022-01-01", "time"=>"12:00"}
Completed 500 Internal Server Error in 4ms (Allocations: 2230)


  
NameError (undefined local variable or method `parms' for #<CourtsController:0x00000000008a48>

    if params[:date].present? && parms[:time].present?
                                 ^^^^^
Did you mean?  params
               params=
               @_params):
  
app/controllers/courts_controller.rb:7:in `index'
Started GET "/courts?date=2022-01-01&time=12:00" for 127.0.0.1 at 2023-02-07 00:26:06 +0530
Processing by CourtsController#index as */*
  Parameters: {"date"=>"2022-01-01", "time"=>"12:00"}
Completed 500 Internal Server Error in 3ms (Allocations: 2235)


  
NameError (undefined local variable or method `parms' for #<CourtsController:0x00000000008ac0>

    if params[:date].present? && parms[:time].present?
                                 ^^^^^
Did you mean?  params
               params=
               @_params):
  
app/controllers/courts_controller.rb:7:in `index'
Started GET "/courts?date=2022-01-01&time=12:00" for 127.0.0.1 at 2023-02-07 00:27:33 +0530
Processing by CourtsController#index as */*
  Parameters: {"date"=>"2022-01-01", "time"=>"12:00"}
Completed 500 Internal Server Error in 151773ms (Allocations: 213581)


  
NoMethodError (undefined method `joins' for nil:NilClass

      @courts = @court.joins(:reservations).where("reservations.start_time >= ? && reservations.end_time < ?", date, date+1.hour).group("courts.id").having("count(reservations.id)=0")
                      ^^^^^^):
  
app/controllers/courts_controller.rb:12:in `index'
Started GET "/courts?date=2022-01-01&time=12:00" for 127.0.0.1 at 2023-02-07 00:30:05 +0530
Processing by CourtsController#index as */*
  Parameters: {"date"=>"2022-01-01", "time"=>"12:00"}
  [1m[36mCourt Load (0.8ms)[0m  [1m[34mSELECT "courts".* FROM "courts" INNER JOIN "reservations" ON "reservations"."court_id" = "courts"."id" WHERE (reservations.start_time >= '2022-01-01 12:00:00' && reservations.end_time < '2022-01-01 13:00:00') GROUP BY "courts"."id" HAVING (count(reservations.id)=0)[0m
  â†³ app/controllers/courts_controller.rb:14:in `index'
Completed 500 Internal Server Error in 2419ms (ActiveRecord: 12.1ms | Allocations: 54765)


  
ActiveRecord::StatementInvalid (PG::SyntaxError: ERROR:  syntax error at or near "<"
LINE 1: ...>= '2022-01-01 12:00:00' && reservations.end_time < '2022-01...
                                                             ^
):
  
app/controllers/courts_controller.rb:14:in `index'
Started GET "/courts?date=2022-01-01&time=12:00" for 127.0.0.1 at 2023-02-07 00:30:14 +0530
Processing by CourtsController#index as */*
  Parameters: {"date"=>"2022-01-01", "time"=>"12:00"}
  [1m[36mCourt Load (1.2ms)[0m  [1m[34mSELECT "courts".* FROM "courts" INNER JOIN "reservations" ON "reservations"."court_id" = "courts"."id"[0m
  â†³ app/controllers/courts_controller.rb:12:in `index'
  [1m[36mCourt Load (1.0ms)[0m  [1m[34mSELECT "courts".* FROM "courts" INNER JOIN "reservations" ON "reservations"."court_id" = "courts"."id" WHERE (reservations.start_time >= '2022-01-01 12:00:00' && reservations.end_time < '2022-01-01 13:00:00')[0m
  â†³ app/controllers/courts_controller.rb:12:in `index'
  [1m[36mCourt Load (1.4ms)[0m  [1m[34mSELECT "courts".* FROM "courts" INNER JOIN "reservations" ON "reservations"."court_id" = "courts"."id" WHERE (reservations.start_time >= '2022-01-01 12:00:00' && reservations.end_time < '2022-01-01 13:00:00') GROUP BY "courts"."id" HAVING (count(reservations.id)=0)[0m
  â†³ app/controllers/courts_controller.rb:14:in `index'
Completed 500 Internal Server Error in 106479ms (ActiveRecord: 3.6ms | Allocations: 110846)


  
ActiveRecord::StatementInvalid (PG::SyntaxError: ERROR:  syntax error at or near "<"
LINE 1: ...>= '2022-01-01 12:00:00' && reservations.end_time < '2022-01...
                                                             ^
):
  
app/controllers/courts_controller.rb:14:in `index'
Started GET "/courts?date=2022-01-01&time=12:00" for 127.0.0.1 at 2023-02-07 00:32:00 +0530
Processing by CourtsController#index as */*
  Parameters: {"date"=>"2022-01-01", "time"=>"12:00"}
  [1m[36mCourt Load (0.6ms)[0m  [1m[34mSELECT "courts".* FROM "courts" INNER JOIN "reservations" ON "reservations"."court_id" = "courts"."id" WHERE (reservations.start_time >= '2022-01-01 12:00:00' && reservations.start_time < '2022-01-01 13:00:00') GROUP BY "courts"."id" HAVING (count(reservations.id)=0)[0m
  â†³ app/controllers/courts_controller.rb:14:in `index'
Completed 500 Internal Server Error in 621ms (ActiveRecord: 5.9ms | Allocations: 49034)


  
ActiveRecord::StatementInvalid (PG::SyntaxError: ERROR:  syntax error at or near "<"
LINE 1: ... '2022-01-01 12:00:00' && reservations.start_time < '2022-01...
                                                             ^
):
  
app/controllers/courts_controller.rb:14:in `index'
Started GET "/courts?date=2022-01-01&time=12:00" for 127.0.0.1 at 2023-02-07 00:32:05 +0530
Processing by CourtsController#index as */*
  Parameters: {"date"=>"2022-01-01", "time"=>"12:00"}
  [1m[36mCourt Load (1.1ms)[0m  [1m[34mSELECT "courts".* FROM "courts" INNER JOIN "reservations" ON "reservations"."court_id" = "courts"."id" WHERE (reservations.start_time >= '2022-01-01 12:00:00' && reservations.start_time < '2022-01-01 13:00:00')[0m
  â†³ app/controllers/courts_controller.rb:12:in `index'
  [1m[36mCourt Load (4.6ms)[0m  [1m[34mSELECT "courts".* FROM "courts" INNER JOIN "reservations" ON "reservations"."court_id" = "courts"."id" WHERE (reservations.start_time >= '2022-01-01 12:00:00' && reservations.start_time < '2022-01-01 13:00:00') GROUP BY "courts"."id" HAVING (count(reservations.id)=0)[0m
  â†³ app/controllers/courts_controller.rb:14:in `index'
Completed 500 Internal Server Error in 103185ms (ActiveRecord: 5.7ms | Allocations: 144703)


  
ActiveRecord::StatementInvalid (PG::SyntaxError: ERROR:  syntax error at or near "<"
LINE 1: ... '2022-01-01 12:00:00' && reservations.start_time < '2022-01...
                                                             ^
):
  
app/controllers/courts_controller.rb:14:in `index'
Started GET "/courts?date=2022-01-01&time=12:00" for 127.0.0.1 at 2023-02-07 00:33:48 +0530
Processing by CourtsController#index as */*
  Parameters: {"date"=>"2022-01-01", "time"=>"12:00"}
  [1m[36mCourt Load (0.7ms)[0m  [1m[34mSELECT "courts".* FROM "courts" INNER JOIN "reservations" ON "reservations"."court_id" = "courts"."id"[0m
  â†³ app/controllers/courts_controller.rb:12:in `index'
  [1m[36mCourt Load (1.5ms)[0m  [1m[34mSELECT "courts".* FROM "courts" INNER JOIN "reservations" ON "reservations"."court_id" = "courts"."id" WHERE (reservations.start_time >= '2022-01-01 12:00:00' and reservations.start_time < '2022-01-01 13:00:00') GROUP BY "courts"."id"[0m
  â†³ app/controllers/courts_controller.rb:12:in `index'
  [1m[36mCourt Load (1.6ms)[0m  [1m[34mSELECT "courts".* FROM "courts" INNER JOIN "reservations" ON "reservations"."court_id" = "courts"."id" WHERE (reservations.start_time >= '2022-01-01 12:00:00' and reservations.start_time < '2022-01-01 13:00:00') GROUP BY "courts"."id" HAVING (count(reservations.id)=0)[0m
  â†³ app/controllers/courts_controller.rb:12:in `index'
  [1m[36mCourt Load (0.4ms)[0m  [1m[34mSELECT "courts".* FROM "courts" ORDER BY "courts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE Court Load (0.1ms)[0m  [1m[34mSELECT "courts".* FROM "courts" INNER JOIN "reservations" ON "reservations"."court_id" = "courts"."id" WHERE (reservations.start_time >= '2022-01-01 12:00:00' and reservations.start_time < '2022-01-01 13:00:00') GROUP BY "courts"."id" HAVING (count(reservations.id)=0)[0m
  â†³ app/controllers/courts_controller.rb:14:in `index'
Completed 200 OK in 618842ms (Views: 4.6ms | ActiveRecord: 10.3ms | Allocations: 186919)


